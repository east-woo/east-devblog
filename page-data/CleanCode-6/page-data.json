{"componentChunkName":"component---src-templates-post-jsx","path":"/CleanCode-6/","result":{"data":{"site":{"siteMetadata":{"title":"east-woo"}},"markdownRemark":{"id":"7725a8eb-56b3-5e37-b8c3-fbb65def1d62","excerpt":"Chapter 07. 오류 처리\npage 129 ~ 142 1. 예외 처리 방식 1) 오류 코드를 리턴하지 말고, 예외를 던져라 옛날에는 오류를 나타낼 때 에러코드를 던졌다. 하지만 예외를 던지는 것이 명확하고, 처리 흐름이 깔끔해진다. 2) 예외를 던지고, 처리하는 방식 1번 구역. 오류가 발생한 부분에서 예외를 던진다.\n(별도의 처리가 필요한 예외라면…","html":"<p><strong>Chapter 07. 오류 처리</strong><br>\n<strong>page 129 ~ 142</strong></p>\n<h2>1. 예외 처리 방식</h2>\n<h3>1) 오류 코드를 리턴하지 말고, 예외를 던져라</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👎 <span class=\"token class-name\">Bad</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DeviceController</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendShutDown</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">DeviceHandle</span> handle <span class=\"token operator\">=</span> <span class=\"token function\">getHandle</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DEV1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Check the state of the device</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> handle <span class=\"token operator\">!=</span> <span class=\"token class-name\">DeviceHandle</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INVALID</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// Save the device status to the record field</span>\n            <span class=\"token function\">retrieveDeviceRecord</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// If not suspended, shut down</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> record<span class=\"token punctuation\">.</span><span class=\"token function\">getStatus</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token constant\">DEVICE_SUSPENDED</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">pauseDevice</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">clearDeviceWorkQueue</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">closeDevice</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                logger<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Device suspended. Unable to shut down\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          logger<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid handle for : \"</span> <span class=\"token operator\">+</span> <span class=\"token constant\">DEV1</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n       <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>옛날에는 오류를 나타낼 때 에러코드를 던졌다.</li>\n<li>하지만 예외를 던지는 것이 명확하고, 처리 흐름이 깔끔해진다.</li>\n</ul>\n<h3>2) 예외를 던지고, 처리하는 방식</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DeviceController</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n  <span class=\"token number\">3</span>번구역 \n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendShutDown</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">tryToShutDown</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>  <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">DeviceShutDownError</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            logger<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span>\n\n <span class=\"token number\">2</span>번구역 \n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">tryToShutDown</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">DeviceShutDownError</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">DeviceHandle</span> handle <span class=\"token operator\">=</span> <span class=\"token function\">getHandle</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DEV1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">DeviceRecord</span> record <span class=\"token operator\">=</span> <span class=\"token function\">retrieveDeviceRecord</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">pauseDevice</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">clearDeviceWorkQueue</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">closeDevice</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n        \n<span class=\"token number\">1</span>번구역\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">DeviceHandle</span> <span class=\"token function\">getHandle</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DeviceId</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n     <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DeviceShutDownError</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid handle for : \"</span> <span class=\"token operator\">+</span> id<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span> </code></pre></div>\n<ul>\n<li>1번 구역. 오류가 발생한 부분에서 예외를 던진다.<br>\n(별도의 처리가 필요한 예외라면 checked exception으로 던진다)</li>\n<li>2번 구역. checked exception에 대한 예외처리를 하지 않는다면 메서드 선언부에 throws를 명시해야한다.</li>\n<li>3번 구역. 예외를 처리할 수 있는 곳에서 catch 하여 처리한다.</li>\n</ul>\n<hr>\n<h2>2. Unchecked Exception을 사용하라</h2>\n<h3>1) Checked vs Unchecked Exception</h3>\n<h4>Exception 가계도</h4>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 613px; '>\n      <a class='gatsby-resp-image-link' href='/static/70c34c4895be069daa023b621f8d2309/ac863/img.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 60.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABrUlEQVQoz21TaXObQAz1//9Bbb6mucbTNgeeYMCAOW1CCF7MjYEX7bq1g7Oa0ewgaR/Se9rZMAwYx/Gb8zjbxQh8C9HWRV2VFAcu6/u+x+FwEN51HWa84KudAMmT9w2Ul9+wTBVVVUzyMuPxE6CsKAxsLNVH4UWeSQG+/oBjTQC5t22LsiypowpJ8kbd6fBcG1nGKFaLHB/zkqJvgPx8j30Y+jMM7QnpR0wXB7TES0f88DuBb2OhzKGpf5Gx5NjIP06lHbZNjZWhUWexKDzbgHyfEadbqKoCa20iJ5G6C/4ngF3XYrtxsVwqNKJ5EiFmHVZhifnLGoaXYp+XKKIIqWEg0XXkjoNmE3I0IeQJkHNnGgtEGxOBpyGKPBFfv7W403v8sYG5CVQ9UGsqoqsrhNx//kB6fY2RqOFIs2HCwYimaQQ43ytujMSw3QCWE2Jle6jq5kgR5deWhX12VH+UcSgzrirb7egiwy79AOmLnr6bm19oHu7R3t5g8I/TDKT+ZLFlL0ZmB5qiMFcoX19RLBTUYXAWRbZTsmf4/xQ0MEYUOHB9Hw55EIZiK3j+EzBInoc11z/PAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='https://www.nextree.co.kr/p3239/' title='https://www.nextree.co.kr/p3239/' src='/static/70c34c4895be069daa023b621f8d2309/ac863/img.png' srcset='/static/70c34c4895be069daa023b621f8d2309/e7570/img.png 170w,\n/static/70c34c4895be069daa023b621f8d2309/f46e7/img.png 340w,\n/static/70c34c4895be069daa023b621f8d2309/ac863/img.png 613w' sizes='(max-width: 613px) 100vw, 613px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>https://www.nextree.co.kr/p3239/</figcaption>\n  </figure></p>\n<p>• <strong>Exception</strong>을 상속하면 <strong>Checked Exception</strong> 명시적인 예외처리가 필요하다.<br>\n(예) lOException, SQLException<br>\n• <strong>RuntimeException</strong>을 상속하면 <strong>Unchekced Exception</strong> 명시적인 예외처리가 필요하지 않다.<br>\n(예) NullPointerException, lllegalArgumentException, IndexOutOfBoundException</p>\n<h3>2) <Effective Java> Exception에 관한 규약</h3>\n<blockquote>\n<p>자바 언어 명세가 요구하는 것은 아니지만, 업계에 널리 퍼진 규약으로<br>\n<strong>Error 클래스를 상속해 하위 클래스를 만드는 일은 자제하자.</strong><br>\n즉, 사용자가 직접 구현하는 uncheked throwable은 모두 <span style=\"color:red\"><strong>RuntimeException의 하위 클래스</strong></span> 여야 한다.<br>\nException, RuntimeException, Error를 상속하지 않는 throwable을 만들 수도 있지만, 이러한 throwable은 정상적인 사항보다 나을 게 하나도 없으면서 API 사용자를 헷갈리게 할 뿐이므로 절대로 사용하지 말자.</p>\n</blockquote>\n<h3>3) Checked Exception이 나쁜 이유</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👍 <span class=\"token class-name\">Good</span> 코드를 다시보자\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DeviceController</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n  <span class=\"token number\">3</span>번구역 \n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendShutDown</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">tryToShutDown</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>  <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">DeviceShutDownError</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            logger<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span>\n\n <span class=\"token number\">2</span>번구역 \n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">tryToShutDown</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">DeviceShutDownError</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">DeviceHandle</span> handle <span class=\"token operator\">=</span> <span class=\"token function\">getHandle</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DEV1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">DeviceRecord</span> record <span class=\"token operator\">=</span> <span class=\"token function\">retrieveDeviceRecord</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">pauseDevice</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">clearDeviceWorkQueue</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">closeDevice</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n        \n<span class=\"token number\">1</span>번구역\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">DeviceHandle</span> <span class=\"token function\">getHandle</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DeviceId</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n     <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DeviceShutDownError</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid handle for : \"</span> <span class=\"token operator\">+</span> id<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span> </code></pre></div>\n<ol>\n<li>특정 메소드에서 checked exception을 throw하고 상위 메소드에서 그 exception을 catch한다면 모든 중간단계 메소드에 exception을 throws 해야한다.<br></li>\n<li>OCP(개방 폐쇄 원칙) 위배<br>\n상위 레벨 메소드에서 하위 레벨 메소드의 디테일에 대해 알아야 하기 때문에 OCP 원칙에 위배된다.<br></li>\n<li>필요한 경우 checked exception을 사용해야 되지만 일반적인 경우 득보다 실이 많다.<br></li>\n</ol>\n<h3>4) Unchecked Exception을 사용하자</h3>\n<blockquote>\n<p>안정적인 소프트웨어를 제작하는 요소로 확인된 예외가 반드시 필요하지는 않다는 사실이 분명해졌다. <br>\nC#은 확인된 예외를 지원하지 않는다.<br>\n영웅적인 시도에도 불구하고 C++ 역시 확인된 예외를 지원하지 않는다.<br>\n파이썬이나 루비도 마찬가지다. 그럼에도 불구하고 <strong>C#, C++, 파이썬, 루비는 안정적인 소프트웨어를 구현하기에 무리가 없다.</strong> </p>\n</blockquote>\n<hr>\n<h2>3. Exception 잘 쓰기</h2>\n<h3>1) 예외에 메시지를 담아라</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👍 <span class=\"token class-name\">Good</span> 코드를 다시보자\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> \n<span class=\"token number\">1</span>번구역\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">DeviceHandle</span> <span class=\"token function\">getHandle</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DeviceId</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n     <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DeviceShutDownError</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid handle for : \"</span> <span class=\"token operator\">+</span> id<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n   <span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>예외에 의미있는 정보가 담겨있다.</li>\n<li>오류가 발생한 원인과 위치를 찾기 쉽도록, 예외를 던질 때는 전후 상황을 충분히 덧붙인다.</li>\n<li>실패한 연산 이름과 유형 등 정보를 담아 예외를 던진다.</li>\n</ul>\n<h3>2) exception wrapper</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👎 로그를 찍을 뿐 하는 일이 없는 코드 \n\n<span class=\"token class-name\">ACMEPort</span> port <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ACMEPort</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n       port<span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">DeviceResponseException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token function\">reportPortError</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       logger<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Device response exception\"</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ATM1212UnlockedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token function\">reportPortError</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       logger<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Unlock exception\"</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">GMXError</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token function\">reportPortError</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       logger<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Device response exception\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token punctuation\">.</span> <span class=\"token punctuation\">.</span> <span class=\"token punctuation\">.</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>로그를 찍을 뿐 할 수 있는 일이 없다.</li>\n</ul>\n<h4>예외를 감싸는 클래스를 만든다</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👍 예외를 감싸는 클래스\n \n   <span class=\"token class-name\">LocalPort</span> port <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LocalPort</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n       port<span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">PortDeviceFilure</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token function\">reportError</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       logger<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token punctuation\">.</span> <span class=\"token punctuation\">.</span> <span class=\"token punctuation\">.</span>\n  <span class=\"token punctuation\">}</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LocalPort</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">private</span> <span class=\"token class-name\">ACMEPort</span> innerPort<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">public</span> <span class=\"token class-name\">LocalPort</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> portNumber<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            innerPort <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ACMEPort</span><span class=\"token punctuation\">(</span>portNumber<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n          innerPort<span class=\"token punctuation\">.</span><span class=\"token keyword\">open</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">DeviceResponseException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PortDeviceFailure</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ATM1212UnlockedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PortDeviceFailure</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">GMXError</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PortDeviceFailure</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span> \n   <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>port.open( )시 발생하는 checked exception들을 감싸도록 port를 가지는 LocalPort 클래스를 만든다.</li>\n<li>port.open( )이 던지는 checked exception들을 하나의 PortDeviceFailure exception으로 감싸서 던진다.</li>\n<li>호출부에서 더 깔끔하게 호출할 수 있다.</li>\n</ul>\n<hr>\n<h2>4. 실무 예외 처리 패턴</h2>\n<h3>1) getOrElse</h3>\n<p>: <strong>예외 대신 기본 값을 리턴한다</strong></p>\n<h4>(1) null이 아닌 기본값</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👎 <span class=\"token class-name\">Bad</span>\n\n<span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Employee</span><span class=\"token punctuation\">></span></span> employees <span class=\"token operator\">=</span> <span class=\"token function\">getEmployees</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> employees <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> <span class=\"token class-name\">Employee</span> e <span class=\"token operator\">:</span> employees <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        totalPay <span class=\"token operator\">+=</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getPay</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>getEmployees를 설계할 때, 데이터가 없는 경우를 null로 표현했는데, 다른 방법이 없을까?</li>\n<li>null을 리턴한다면 이후 코드에서 모두 null 체크가 있어야한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👍 <span class=\"token class-name\">Good</span>\n\n<span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Employee</span><span class=\"token punctuation\">></span></span> employees <span class=\"token operator\">=</span> <span class=\"token function\">getEmployees</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> employees <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> <span class=\"token class-name\">Employee</span> e <span class=\"token operator\">:</span> employees <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        totalPay <span class=\"token operator\">+=</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getPay</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Employee</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getEmployees</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> there are no employees <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token class-name\">Collections</span><span class=\"token punctuation\">.</span><span class=\"token function\">emptyList</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>복수형의 데이터를 가져올 때는 데이터의 없음을 의미하는 컬렉션을 리턴하면 된다.</li>\n<li>null 보다 size가 0인 컬렉션이 훨씬 안전하다.</li>\n</ul>\n<h5>🤚 BUT! 빈 컬렉션, 빈 문자열을 적용할 수 없는 경우라면?</h5>\n<h4>(2) 도메인에 맞는 기본 값</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👎 <span class=\"token class-name\">Bad</span>\n\n<span class=\"token class-name\">UserLevel</span> userLevel <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findByUserId</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     userLevel <span class=\"token operator\">=</span> user<span class=\"token punctuation\">.</span><span class=\"token function\">getUserLevel</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">UserNotFoundException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     userLevel <span class=\"token operator\">=</span> <span class=\"token class-name\">UserLevel</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BASIC</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// userLevel을 이용한 처리 </span></code></pre></div>\n<ul>\n<li>호출부에서 예외 처리를 통해 userLevel 값을 처리한다.</li>\n<li>코드를 계속 읽어나가면서 논리적인 흐름이 끊긴다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👍 <span class=\"token class-name\">Good</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserService</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">UserLevel</span> <span class=\"token constant\">USER_BASIC_LEVEL</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">UserLevel</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BASIC</span><span class=\"token punctuation\">;</span>\n\n     <span class=\"token keyword\">public</span> <span class=\"token class-name\">UserLevel</span> <span class=\"token function\">getUserLevelOrDefault</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> userId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findByUserId</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">.</span><span class=\"token function\">getUserLevel</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">UserNotFoundException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token constant\">USER_BASIC_LEVEL</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">// 호출부 코드 </span>\n<span class=\"token class-name\">UserLevel</span> userLevel <span class=\"token operator\">=</span> userService<span class=\"token punctuation\">.</span><span class=\"token function\">getUserLevelOrDefault</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>예외 처리를 <strong>데이터를 제공하는 쪽에서 처리해</strong> 호출부 코드가 심플해진다. 재활용성이 높아진다.</li>\n<li>코드를 읽어가며 논리적인 흐름이 끊기지 않는다.</li>\n<li>도메인에 맞는 기본값을 도메인 서비스에서 관리한다.</li>\n</ul>\n<h5>🤚 도메인에 맞는 기본값이 없다면???!!!</h5>\n<h3>2) getOrElseThrow : null 대신 예외를 던진다</h3>\n<h4>(1) null 체크 지옥에서 벗어나자</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👎 <span class=\"token class-name\">Bad</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">registerItem</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Item</span> item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">ItemRegistry</span> registry <span class=\"token operator\">=</span> peristentStore<span class=\"token punctuation\">.</span><span class=\"token function\">getItemRegistry</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>registry <span class=\"token operator\">!</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n             <span class=\"token class-name\">Item</span> existing <span class=\"token operator\">=</span> registry<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span><span class=\"token function\">getID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n             <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>existing<span class=\"token punctuation\">.</span><span class=\"token function\">getBillingPeriod</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">hasRetailOwner</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                 existing<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n             <span class=\"token punctuation\">}</span>\n         <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>null 체크가 빠진 부분이 발생할 수 있다.</li>\n<li>peristentStore에 대한 null 체크가 빠져있지만 알아챌 수 없다.!</li>\n<li>코드 가독성이 현저히 떨어진다.</li>\n</ul>\n<h4>(2) 기본 값이 없을 때 null 대신 예외를 던진다</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👎 <span class=\"token class-name\">Bad</span>\n\n<span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findByUserId</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> user <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// user를 이용한 처리 </span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>user를 사용하는 쪽에서 매번 null 체크를 해야한다.</li>\n<li>가독성뿐 아니라 안정성도 떨어진다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👍 <span class=\"token class-name\">Good</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserService</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">UserLevel</span> <span class=\"token constant\">USER_BASIC_LEVEL</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">UserLevel</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BASIC</span><span class=\"token punctuation\">;</span>\n\n     <span class=\"token keyword\">public</span> <span class=\"token class-name\">UserLevel</span> <span class=\"token function\">getUserOrElseThrow</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> userId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findByUserId</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> user <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                 <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"User is not found. userId = \"</span> <span class=\"token operator\">+</span> userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n             <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>데이터를 제공하는 쪽에서 null 체크를 하여, 데이터가 없는 경우엔 예외를 던진다.</li>\n<li>호출부에서 매번 null 체크를 할 필요 없이 안전하게 데이터를 사용할 수 있다.</li>\n<li>호출부의 가독성이 올라간다.</li>\n</ul>\n<h4>(3) 파라미터의 null을 점검해라</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👎 <span class=\"token class-name\">Bad</span> \n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MetricsCalculator</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> <span class=\"token function\">xProjection</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Point</span> p1<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Point</span> p2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n           <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>p2<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> p1<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1.5</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// calculator.xProjection(null, new Point(12, 13));</span>\n<span class=\"token comment\">// NullPointerException 발생한다.</span></code></pre></div>\n<ul>\n<li>null을 리턴하는 것도 나쁘지만 null을 메서드로 넘기는 것은 더 나쁘다.</li>\n<li>null을 메서드의 파라미터로 넣어야 하는  API를 사용하는 경우가 아니면 null을 메서드로 넘기지 마라.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👍 <span class=\"token class-name\">Good</span> \n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MetricsCalculator</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> <span class=\"token function\">xProjection</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Point</span> p1<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Point</span> p2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> p1 <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> p2 <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">throw</span> <span class=\"token class-name\">InvalidArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid argument for MetricsCalculator.xProjection\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n         <span class=\"token punctuation\">}</span>\n         <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>p2<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> p1<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1.5</span>\n     <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>null을 파라미터로 받지 못하게 한다.</li>\n<li>null이 들어오면 unchecked exception을 발생시킨다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">👍 <span class=\"token class-name\">Good</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MetricsCalculator</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> <span class=\"token function\">xProjection</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Point</span> p1<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Point</span> p2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">assert</span> p1 <span class=\"token operator\">!=</span>  <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"p1 should not be null\"</span> <span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">assert</span> p2 <span class=\"token operator\">!=</span>  <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"p2 should not be null\"</span> <span class=\"token punctuation\">;</span>\n        \n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>p2<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> p1<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1.5</span>\n     <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>assert를 통해 null이 들어오면 에러를 발생시킨다.</li>\n</ul>\n<hr>\n<h2>5. 실무에서는 보통 자신의 예외를 정의한다.</h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyProjectException</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">RuntimeException</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">private</span> <span class=\"token class-name\">MyErrorCode</span> errorCode<span class=\"token punctuation\">;</span>\n     <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> errorMessage<span class=\"token punctuation\">;</span>\n\n     <span class=\"token keyword\">public</span> <span class=\"token class-name\">MyProjectException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyErrorCode</span> errorCode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n\n     <span class=\"token keyword\">public</span> <span class=\"token class-name\">MyProjectException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyErrorCode</span> errorCode<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> errorMessage<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n     <span class=\"token keyword\">public</span> <span class=\"token keyword\">enum</span> <span class=\"token class-name\">MyErrorCode</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> defaultErrorMessage<span class=\"token punctuation\">;</span>        \n   \n          <span class=\"token function\">INVALID_REQUEST</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"잘못된 요청입니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token function\">DUPLICATED_REQUEST</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"기존 요청과 중복되어 처리할 수 없습니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token comment\">// ..</span>\n          <span class=\"token function\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"처리 중 에러가 발생했습니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 호출부 </span>\n     <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getUserName</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyProjectException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ErrorCode</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INVALID_REQUEST</span><span class=\"token punctuation\">,</span> \"userName is <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>장점</strong></p>\n<ul>\n<li>에러 로그에서 stacktrace 해봤을 때 우리가 발생시킨 예외라는 것을 바로 인지할 수 있다.</li>\n<li>다른 라이브러리에서 발생한 에러와 섞이지 않는다.<br>\n우리도 IllegalArgumentException을 던지는 것보다 우리 예외로 던지는 게 어느 부분에서 에러가 났는지 파악하기에 용이하다.</li>\n<li>우리 시스템에서 발생한 에러의 종류를 나열할 수 있다.</li>\n</ul>\n<hr>\n<h2>오픈소스 속 Exception 살펴보기</h2>\n<h3>apps-android-commons</h3>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/6702cc2aea94204eac1c62423ae86a13/4423c/img_1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 124.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsTAAALEwEAmpwYAAACvUlEQVQ4y41Vi3KjMBDr///lTdtJwyNgAwabh04ykBiSXo6ZHcAPsSutxUff9+iHAbr0HHyA9x6Ozz7oOcTxgWM+RkAI65p5nuO+ZVmwXx8uARynCYGLBDRwbBzHDXQFEqjGtE7zE+9PgH0/cNLHF1/VCN8XtLzn5S1mZpsG5a1C07Ro2jaOCXS/UrAVkF/SlyNg12GyDQI3tc4hjCFGx3GtU6kdx5VABGIsWxwzFCAHPbMa2w6jMZgcN9sFTT2hMT3KsoS1FoOt4Ooy0rBn+GvJrIUbLK6fX8ivOaxxuFlmy4+odMvsjbEx0xToBNjfS9aEiJ5Zoh8CGheeOEq5SwH35xVwU3mhwnsrPDbin9eTKLFt+hVwmmZc8wJFUSDPc9SVwU9hMGzKaq1zawKp2ksiziHDmeXaoox8dZ1b1dU8PxhIS8v3bouWa8Tlc8lJ26i+mYsE6AnUUISSykvRZZkjv/eYFza4Yj5w+WgbDWwhHgXy/fWNn2uGrKjY6BUVrhkm3ivTIq8HmNa/AByee2ocJ2RZhrxy+JM5fOYdqjbADVOce1b/oHICuE9zk8lvPHY3ZCw7Kxh6Z6YF3/ONawmZJnPgcNlaZyKPPc3gVlEcqupjuKi2430Vx8XjeG7uj9S+lk2YwE3mcoGzLQpD1xEtUpaxm4SAB+8PLRMzdCdAZTfKpkiDqJA4sqvlXYcfjl7CYeC57amk7EstcyOHNd91nuWJ0R/vHpn4pI4s6YoZ3s1h47Cva/jaoJIYPDESpqDbFBRC9hVdXKdlC2EEnpoEcDsp8kQC+csVPblS+SFM3PRw6rclnzmEmpoKZjzPHa0sL9nIrbv32VmEl6KcSw6bEShzqZn+O1554K8Z6goyCGZmKYRa5GxT7zN0D/sSqYFAMlfrdlfGf7fMoW20ScTP+hl5ndlVtXcZneMvOOKo5cVPl04AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='https://github.com/commons-app/apps-android-commons/blob/main/app/src/main/java/fr/free/nrw/commons/bookmarks/pictures/BookmarkPicturesDao.java' title='https://github.com/commons-app/apps-android-commons/blob/main/app/src/main/java/fr/free/nrw/commons/bookmarks/pictures/BookmarkPicturesDao.java' src='/static/6702cc2aea94204eac1c62423ae86a13/ca1dc/img_1.png' srcset='/static/6702cc2aea94204eac1c62423ae86a13/e7570/img_1.png 170w,\n/static/6702cc2aea94204eac1c62423ae86a13/f46e7/img_1.png 340w,\n/static/6702cc2aea94204eac1c62423ae86a13/ca1dc/img_1.png 680w,\n/static/6702cc2aea94204eac1c62423ae86a13/02d09/img_1.png 1020w,\n/static/6702cc2aea94204eac1c62423ae86a13/4423c/img_1.png 1036w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>https://github.com/commons-app/apps-android-commons/blob/main/app/src/main/java/fr/free/nrw/commons/bookmarks/pictures/BookmarkPicturesDao.java</figcaption>\n  </figure></p>\n<p><strong>① 125 - 127 라인</strong><br>\nparameter인 bookmark가 null이면 예외를 던지지않고 false를 리턴한다.<br>\n-> Bookmark 존재여부에 대한 메서드의 목적에 부합한다.<br></p>\n<p><strong>② 131  - 143 라인</strong><br>\ndb 리소스를 처리할 때 checked exception인 RemoteException을 별도로 처리하지 않고<br>\nRuntimeException으로 바꿔서 던졌다.<br></p>\n<p><strong>③ 144 - 149 라인</strong><br>\nfianally 블록에서 리소스를 close 처리한다. (리소스를 사용했다면 반드시 finally 블록에서 닫아줘야한다.)<br></p>","frontmatter":{"title":"[클린코드-6] 우아하게 예외 처리하기","date":"June 29, 2024","update":"June 29, 2024","tags":["독서","Clean Code"],"series":"Clean Code"},"fields":{"slug":"/CleanCode-6/","readingTime":{"minutes":13.665}}},"seriesList":{"edges":[{"node":{"id":"b406bb1d-20e8-56cf-aeb9-372b40275c78","fields":{"slug":"/CleanCode-1/"},"frontmatter":{"title":"[클린코드-1] 클린 코드와 그 첫걸음"}}},{"node":{"id":"d34f1573-694e-5d31-9fc0-6abc568f788b","fields":{"slug":"/CleanCode-2/"},"frontmatter":{"title":"[클린코드-2] 함수를 안전하고 간결하게 작성하기"}}},{"node":{"id":"2561081f-3b40-5810-aed4-4688770e362d","fields":{"slug":"/CleanCode-3/"},"frontmatter":{"title":"[클린코드-3] 코드를 보조하는 주석"}}},{"node":{"id":"8bfe4c44-e879-5335-b3be-9acce01ed2f5","fields":{"slug":"/CleanCode-4/"},"frontmatter":{"title":"[클린코드-4] 코드의 가독성에 필수적인 포맷팅"}}},{"node":{"id":"cdf67bfa-eb4b-5d41-98f4-02a410c11737","fields":{"slug":"/CleanCode-5/"},"frontmatter":{"title":"[클린코드-5] 객체와 자료구조로 데이터 표현하기"}}},{"node":{"id":"7725a8eb-56b3-5e37-b8c3-fbb65def1d62","fields":{"slug":"/CleanCode-6/"},"frontmatter":{"title":"[클린코드-6] 우아하게 예외 처리하기"}}},{"node":{"id":"4e262a40-e19d-5830-a48c-e46c38f62ce8","fields":{"slug":"/CleanCode-7/"},"frontmatter":{"title":"[클린코드-7] 모호한 경계를 적당히 구분짓기"}}},{"node":{"id":"be7a0d17-10d6-5dda-b0ad-86b9b87794df","fields":{"slug":"/CleanCode-8/"},"frontmatter":{"title":"[클린코드-8] 깨끗한 테스트 코드"}}},{"node":{"id":"7cffdb26-f508-50f1-ac60-9d891e5a4456","fields":{"slug":"/CleanCode-9/"},"frontmatter":{"title":"[클린코드-9] 클래스 잘 설계하기"}}},{"node":{"id":"6b99e341-03c1-5ef1-b715-2f9e60cb34c9","fields":{"slug":"/CleanCode-10/"},"frontmatter":{"title":"[클린코드-10] 클래스 잘 설계하기"}}},{"node":{"id":"de25428c-8bc8-5e86-8726-6dbcb1b4bf08","fields":{"slug":"/CleanCode-11/"},"frontmatter":{"title":"[클린코드-11] 창발적 설계로 깔끔한 코드 구현하기"}}}]},"previous":{"fields":{"slug":"/CleanCode-5/"},"frontmatter":{"title":"[클린코드-5] 객체와 자료구조로 데이터 표현하기"}},"next":{"fields":{"slug":"/CleanCode-7/"},"frontmatter":{"title":"[클린코드-7] 모호한 경계를 적당히 구분짓기"}}},"pageContext":{"id":"7725a8eb-56b3-5e37-b8c3-fbb65def1d62","series":"Clean Code","previousPostId":"cdf67bfa-eb4b-5d41-98f4-02a410c11737","nextPostId":"4e262a40-e19d-5830-a48c-e46c38f62ce8"}},"staticQueryHashes":[]}