---
title: "Isolation Forest"
description: "ì–´ë–»ê²Œ ê¸€ì„ ì‘ì„±í•˜ê³  ì¶”ê°€í• ê¹Œìš”?"
date: 2024-07-30
update: 2024-07-30
tags:
  - ì—…ë¬´
  - Outlier
series: "Outlier"
---

# Introduction

Anomaly Detectionì˜ ë°©ë²•ë¡  ì†Œê°œë¡œ Model-based Methodsì˜Â **Isolation Forest**ì— ëŒ€í•´ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

[Liu, Fei Tony et al. â€œIsolation Forest.â€Â *2008 Eighth IEEE International Conference on Data Mining*Â (2008): 413-422.](https://www.semanticscholar.org/paper/Isolation-Forest-Liu-Ting/00a1077d298f2917d764eb729ab1bc86af3bd241)Â ë…¼ë¬¸ê³¼Â [ê³ ë ¤ëŒ€í•™êµ ê¹€ì„±ë²” êµìˆ˜ë‹˜ì˜ ìë£Œ](https://www.youtube.com/watch?v=wADcqMdpuv4&t=2177s&ab_channel=%E2%80%8D%EA%B9%80%EC%84%B1%EB%B2%94%5B%EA%B5%90%EC%88%98%2F%EC%82%B0%EC%97%85%EA%B2%BD%EC%98%81%EA%B3%B5%ED%95%99%EB%B6%80%5D)ë¥¼ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.

# Isolation Forest

> ğŸ’¡ í•œ ê°ì²´ë¥¼ ê³ ë¦½ì‹œí‚¤ëŠ” ì˜ì‚¬ê²°ì •ë‚˜ë¬´ ëª¨ë¸ì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ë¡ 

- ê°€ì • : **ì •ìƒ ê´€ì¸¡ì¹˜**ëŠ” ê³ ë¦½ë˜ê¸° ì–´ë ¤ìš¸ ê²ƒì´ë‹¤. â‡’ **ì •ìƒ ê´€ì¸¡ì¹˜**ë¥¼ ê³ ë¦½ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” 2ì§„ ë¶„í• ì„ ì—¬ëŸ¬ ë²ˆ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.

![](img.png)

- ê°€ì • : **ì´ìƒì¹˜**ëŠ” ì‰½ê²Œ ê³ ë¦½ë  ê²ƒì´ë‹¤ â‡’ **ì´ìƒì¹˜**ë¥¼ ê³ ë¦½ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” 2ì§„ ë¶„í• ì„ ì‘ê²Œ ìˆ˜í–‰í•´ë„ ëœë‹¤.

![](img_1.png)

- ê´€ì¸¡ì¹˜ë¥¼ ê³ ë¦½ì‹œí‚¤ê¸° ìœ„í•œ **ë¶„ë¦¬ íšŸìˆ˜ë¥¼ ì´ìƒì¹˜ ì ìˆ˜ë¡œ í™œìš©**

![](img_2.png)

- Yë³€ìˆ˜(ë ˆì´ë¸” ì •ë³´) ì—†ì´ ì–´ë–»ê²Œ iForest ëª¨ë¸ì„ êµ¬ì¶•?
    - ì „ì²´ ë°ì´í„°ì—ì„œ ì¼ë¶€ ê´€ì¸¡ì¹˜ë¥¼ ëœë¤í•˜ê²Œ ì„ íƒ (ì˜ˆ: 1,000ê°œ ë°ì´í„°ì—ì„œ 700 ëœë¤í•˜ê²Œ ì„ íƒ)
    - ëœë¤í•˜ê²Œ ì„ íƒëœ ê´€ì¸¡ì¹˜ì— ëŒ€í•´ ì„ì˜ì˜ ë³€ìˆ˜(splitting variable)ì™€ ë¶„í• ì (splitang point)ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•  ë•Œê¹Œì§€ ì´ì§„ë¶„í•  ì§„í–‰
        - ì˜ì‚¬ê²°ì •ë‚˜ë¬´ëª¨ë¸ì´ ì‚¬ì „ ì •ì˜ëœ ê¹Šì´ì— ë„ë‹¬
        - ëª¨ë“  í„°ë¯¸ë„ ë…¸ë“œì— ê´€ì¸¡ì¹˜ì— 1ê°œì”© ì¡´ì¬
        - ëª¨ë“  í„°ë¯¸ë„ ë…¸ë“œì— ì¡´ì¬í•˜ëŠ” ê´€ì¸¡ì¹˜ë“¤ì´ ê°™ì€ ì…ë ¥ë³€ìˆ˜
    - ìœ„ì™€ ê°™ì€ ê³¼ì •ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ iTree êµ¬ì¶•
    - iTree ë§ˆë‹¤ ê° ê´€ì¸¡ì¹˜ì˜ path lengthë¥¼ ì €ì¥

![](img_3.png)

- ì´ìƒì¹˜ ìŠ¤ì½”ì–´ë¥¼ ì–´ë–»ê²Œ ì •ì˜?
    - Path lengthë¥¼ ê¸°ë°˜ìœ¼ë¡œ anomaly score ì •ì˜
    - Path length (=$h(x)$): Root nodeë¡œ ë¶€í„° ê´€ì¸¡ì¹˜ xê°€ ì†í•´ ìˆëŠ” terminal nodeê¹Œì§€ ê±°
      ì³ê°„ edge(branch)ì˜ ìˆ˜ ( xê°€ ê³ ë¦½ë  ë•Œê¹Œì§€ í•„ìš”í•œ ë¶„í•  íšŸìˆ˜)
    - Normalized $h(x)$: $c(n)$ = $2H(n - 1) - \left\{\frac{2(n-1)}{n}\right\}$(ëª¨ë“  ê´€ì¸¡ì¹˜ë“¤ì˜ í‰ê·  path length)
      $H(i) = ln(i) + 0.5772156649$ (Euler's constant; ì˜¤ì¼ëŸ¬ ìƒìˆ˜)
    - Anomaly score $s(x,n)$ = $2 c(n)^\frac{-E(h(x))}{c(n)}$ , $E(h(x))$ is the average of $h(x)$
        - $E(h(x))$ â†’ 0, $s(x,n)$ â†’ $2^0$ â†’ 1 (path lengthì˜ **í‰ê· ê°’ì´ 0ì— ê°€ê¹Œì›€ìœ¼ë¡œ ì´ìƒ ë°ì´í„°**)
            - $E(h(x))$ â†’ $n-1$ , $s(x,n)$ â†’ $2^{-å¤§}$ â†’ 0 (path lengthì˜ **í‰ê· ê°’ì´ nì— ê°€ê¹Œì›€ìœ¼ë¡œ ì •ìƒ ë°ì´í„°**)
        - $E(h(x))$ â†’ $c(n)$, $s(x, n)$ â†’ $2^{-1}$ â†’ 0.5 (path lengthì˜ í‰ê· ê°’ì´ normalized h(x)ì™€ ë¹„ìŠ·í•¨ìœ¼ë¡œ **ì •ìƒ ë°ì´í„°**)

- ì‹¤ì œ ë°ì´í„°ë¡œ ì´ìƒì¹˜ ì ìˆ˜ë¥¼ ì¶”ì •í•œ ê²°ê³¼ ì˜ˆì‹œ

  ![](img_4.png)


â†’ ë‚®ì€ ì´ìƒì¹˜ ì ìˆ˜ë¥¼ ë³´ì´ëŠ” ì •ìƒ ê´€ì¸¡ì¹˜ë“¤

# ì°¸ì¡° ë¬¸í—Œ

> ğŸ“š <br/>
> ğŸ“– [[í•µì‹¬ ë¨¸ì‹ ëŸ¬ë‹ ] Anomaly Detection - Local Outlier Factor (LOF) - ê¹€ì„±ë²”](https://www.youtube.com/watch?v=VZWQfQHsGGY&ab_channel=%E2%80%8D%EA%B9%80%EC%84%B1%EB%B2%94%5B%EA%B5%90%EC%88%98%2F%EC%82%B0%EC%97%85%EA%B2%BD%EC%98%81%EA%B3%B5%ED%95%99%EB%B6%80%5D) <br/>

